<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>jWeather</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ====== General Card Styling ====== */
    .card {
      @apply bg-white rounded-lg shadow border border-gray-200 mb-6;
    }
    .condition-summary-grid {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 0.5rem 1rem;
      align-items: center;
    }
    .alert-item {
      @apply p-4 mb-3 rounded-lg shadow border-l-4;
    }
    .prose {
      @apply max-w-none;
    }
    .prose h5 {
      @apply font-semibold mt-2 mb-1;
    }
    .prose p {
      @apply mb-2;
    }
    .prose-invert h5,
    .prose-invert p {
      /* for dark backgrounds */
    }
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    .animate-spin {
      animation: spin 1s linear infinite;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">

  <!-- Header Section -->
  <header class="bg-red-600 text-white p-4 shadow-md">
    <div class="container mx-auto flex justify-between items-center">
      <div class="flex items-center">
        <svg class="w-10 h-10 mr-2 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-1.991-5.189 5.25 5.25 0 0 0-10.513 2.288c-.887-.462-1.868-.682-2.847-.682A4.5 4.5 0 0 0 2.25 15Z"/>
        </svg>
        <h1 class="text-3xl font-bold">jWeather</h1>
      </div>
      <nav>
        <ul class="flex space-x-6 text-lg">
          <li class="relative group">
            <a href="#" class="hover:text-gray-300 transition-colors duration-200">Severe Weather</a>
            <ul class="absolute right-0 lg:left-0 mt-2 w-56 bg-red-700 rounded-md shadow-xl hidden group-hover:block z-10 py-1">
              <li><a href="#" class="block px-4 py-2 text-sm hover:bg-red-800 transition-colors duration-150">Outlook</a></li>
              <li><a href="#" class="block px-4 py-2 text-sm hover:bg-red-800 transition-colors duration-150">Mesoscale Discussions</a></li>
              <li><a href="#" class="block px-4 py-2 text-sm hover:bg-red-800 transition-colors duration-150">Parameters</a></li>
              <li><a href="#" class="block px-4 py-2 text-sm hover:bg-red-800 transition-colors duration-150">Storm Reports</a></li>
              <li><a href="#" class="block px-4 py-2 text-sm hover:bg-red-800 transition-colors duration-150">Severe Weather 101</a></li>
            </ul>
          </li>
          <li><a href="#" class="hover:text-gray-300 transition-colors duration-200">Tropical</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Main Content Area -->
  <main class="container mx-auto p-4 md:p-6">

    <!-- Two-column section for Search/Current Conditions and News -->
    <div class="flex flex-col lg:flex-row lg:space-x-6">
      <!-- Left Column: Search & Current Conditions + Alerts -->
      <div class="lg:w-2/3 w-full space-y-4">

        <!-- Search & Current Conditions Card -->
        <section id="search-current-conditions-card" class="card p-6">
          <h2 class="text-2xl font-semibold mb-4 text-gray-700">Search Location</h2>
          <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mb-2">
            <input
              type="text"
              id="location-search-input"
              placeholder="Enter City, State or Zip Code"
              class="flex-grow p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"
            />
            <button id="search-button" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-md transition-colors duration-200">
              Search
            </button>
          </div>
          <div id="search-error-message" class="text-red-500 mt-2 hidden"></div>

          <div id="current-conditions-display" class="hidden mt-4">
            <h3 class="text-xl font-semibold mb-3 text-gray-700">
              Current Conditions for <span id="location-name" class="text-blue-600">[Location]</span>
            </h3>
            <div id="current-condition-summary-box" class="bg-gray-50 p-4 rounded-lg mb-4 shadow">
              <div class="flex items-center mb-3 pb-3 border-b border-gray-300">
                <img
                  id="summary-condition-icon"
                  src="https://placehold.co/64x64/e2e8f0/94a3b8?text=N/A"
                  alt="Weather condition"
                  class="w-16 h-16 mr-4"
                />
                <p id="summary-condition-text" class="text-2xl font-bold text-gray-800">Fetching...</p>
              </div>
              <div class="condition-summary-grid text-sm sm:text-base">
                <p class="font-medium text-gray-600">Temperature:</p>
                <p id="summary-temp" class="font-semibold text-gray-800">[Temp]</p>

                <p class="font-medium text-gray-600">Feels Like:</p>
                <p id="summary-feels-like" class="font-semibold text-gray-800">[Feels Like]</p>

                <p class="font-medium text-gray-600">Wind:</p>
                <p id="summary-wind" class="font-semibold text-gray-800">[Wind]</p>

                <p class="font-medium text-gray-600">Humidity/Dew Point:</p>
                <p id="summary-humidity-dewpoint" class="font-semibold text-gray-800">[Humidity/Dew Point]</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Active Alerts Card -->
        <section id="active-alerts-card" class="card p-6 hidden">
          <h2 class="text-2xl font-semibold mb-4 text-gray-700">Active Alerts</h2>
          <div id="alerts-content-area">
            <!-- Alerts injected here -->
          </div>
        </section>
      </div>

      <!-- Right Column: Latest US Weather News -->
      <div class="lg:w-1/3 w-full">
        <section id="weather-news-card" class="card p-6">
          <h2 class="text-2xl font-semibold mb-4 text-gray-700">Latest US Weather News</h2>
          <div id="news-content-area">
            <p class="text-gray-500">News content will appear here.</p>
          </div>
        </section>
      </div>
    </div>

    <!-- Weather Forecast Card -->
    <section id="weather-forecast-card" class="card p-6 hidden">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-semibold text-gray-700">Weather Forecast</h2>
        <button id="toggle-forecast-days" class="text-blue-600 hover:underline text-sm focus:outline-none">
          Show 7-Day Forecast
        </button>
      </div>
      <div id="forecast-content-area" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3">
        <!-- Forecast data will be inserted here -->
      </div>
    </section>

    <!-- Radar Card (below Forecast) -->
    <section id="radar-card" class="card p-6 hidden">
      <h2 class="text-2xl font-semibold mb-4 text-gray-700">Weather Radar</h2>
      <div id="radar-container" class="w-full h-[450px]">
        <!-- iframe inserted dynamically -->
      </div>
    </section>

  </main>

  <footer class="text-center p-6 text-gray-500 text-sm border-t border-gray-200 mt-8">
    &copy; <span id="current-year"></span> jWeather. All rights reserved.
  </footer>

  <script>
    // --- API Configuration ---
    const NWS_API_BASE_URL = "https://api.weather.gov";
    const NWS_USER_AGENT = "(jWeather App, your.email@example.com)";

    // --- Utility Functions ---
    function getDewPointDescription(dewPointF) {
      if (dewPointF == null || isNaN(dewPointF)) return "N/A";
      if (dewPointF < 50) return "Pleasantly Dry";
      if (dewPointF < 55) return "Comfortable";
      if (dewPointF < 60) return "Becoming a Bit Humid";
      if (dewPointF < 65) return "Humid";
      if (dewPointF < 70) return "Sticky";
      if (dewPointF < 75) return "Muggy & Uncomfortable";
      return "Oppressive";
    }

    function showElement(el) { if (el) el.classList.remove("hidden"); }
    function hideElement(el) { if (el) el.classList.add("hidden"); }
    function displaySearchError(msg) {
      searchErrorEl.textContent = msg;
      showElement(searchErrorEl);
    }
    function clearSearchError() {
      searchErrorEl.textContent = "";
      hideElement(searchErrorEl);
    }

    // --- DOM References ---
    const searchInput = document.getElementById("location-search-input");
    const searchButton = document.getElementById("search-button");
    const searchErrorEl = document.getElementById("search-error-message");

    const currentConditionsDisplay = document.getElementById("current-conditions-display");
    const locationNameSpan = document.getElementById("location-name");

    const summaryIconEl = document.getElementById("summary-condition-icon");
    const summaryTextEl = document.getElementById("summary-condition-text");
    const summaryTempEl = document.getElementById("summary-temp");
    const summaryFeelsEl = document.getElementById("summary-feels-like");
    const summaryWindEl = document.getElementById("summary-wind");
    const summaryHumidityEl = document.getElementById("summary-humidity-dewpoint");

    const activeAlertsCard = document.getElementById("active-alerts-card");
    const alertsContainer = document.getElementById("alerts-content-area");

    const forecastCard = document.getElementById("weather-forecast-card");
    const forecastContainer = document.getElementById("forecast-content-area");
    const toggleForecastBtn = document.getElementById("toggle-forecast-days");

    const radarCard = document.getElementById("radar-card");
    const radarContainer = document.getElementById("radar-container");

    const newsContainer = document.getElementById("news-content-area");

    const locationSpecificSections = [
      currentConditionsDisplay,
      activeAlertsCard,
      forecastCard,
      radarCard
    ];

    let isShowing7Day = false;
    let storedForecastPeriods = null;

    // --- Event Listeners ---
    searchButton.addEventListener("click", () => handleSearch());
    searchInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") handleSearch();
    });
    toggleForecastBtn.addEventListener("click", () => {
      isShowing7Day = !isShowing7Day;
      toggleForecastBtn.textContent = isShowing7Day ? "Show 5-Day Forecast" : "Show 7-Day Forecast";
      displayForecast(storedForecastPeriods);
    });

    // --- Main Search Function ---
    async function handleSearch() {
      const query = searchInput.value.trim();
      clearSearchError();
      locationSpecificSections.forEach(hideElement);
      alertsContainer.innerHTML = "";
      forecastContainer.innerHTML = "";
      radarContainer.innerHTML = "";

      if (!query) {
        displaySearchError("Please enter a location (City, State or Zip Code).");
        return;
      }

      searchButton.textContent = "Searching...";
      searchButton.disabled = true;

      try {
        const locationData = await geocodeLocation(query);
        locationNameSpan.textContent = locationData.displayName;

        const lat = parseFloat(locationData.lat.toFixed(4));
        const lon = parseFloat(locationData.lon.toFixed(4));
        const pointsUrl = `${NWS_API_BASE_URL}/points/${lat},${lon}`;
        const pointsData = await nwsFetch(pointsUrl);

        const forecastUrl = pointsData.properties.forecast;
        const forecastHourlyUrl = pointsData.properties.forecastHourly;
        const observationStationsUrl = pointsData.properties.observationStations;
        const alertsUrl = `${NWS_API_BASE_URL}/alerts/active?point=${lat},${lon}`;

        const [hourlyResp, forecastResp, stationsResp, alertsResp] = await Promise.all([
          nwsFetch(forecastHourlyUrl),
          nwsFetch(forecastUrl),
          nwsFetch(observationStationsUrl),
          nwsFetch(alertsUrl)
        ]);

        let currentPeriod = hourlyResp.properties.periods[0];
        let latestObs = null;
        if (stationsResp.features.length) {
          try {
            const latestUrl = `${stationsResp.features[0].id}/observations/latest`;
            const obsResp = await nwsFetch(latestUrl);
            latestObs = obsResp.properties;
          } catch (e) {
            console.warn("No latest observation:", e.message);
          }
        }

        displayCurrentConditions(currentPeriod, latestObs);
        displayActiveAlerts(alertsResp.features);

        if (forecastResp.properties && forecastResp.properties.periods) {
          storedForecastPeriods = forecastResp.properties.periods;
          isShowing7Day = false;
          toggleForecastBtn.textContent = "Show 7-Day Forecast";
          displayForecast(storedForecastPeriods);
        }

        embedRadar(lat, lon);

        locationSpecificSections.forEach(showElement);
      } catch (err) {
        console.error("Search failed:", err);
        displaySearchError(err.message);
      } finally {
        searchButton.textContent = "Search";
        searchButton.disabled = false;
      }
    }

    // --- Display Current Conditions ---
    function displayCurrentConditions(period, obs) {
      let tempF = null;
      let windSpeed = "N/A";
      let windDir = "";
      let humidity = "N/A";
      let dewC = null;
      let iconUrl = period?.icon || "https://placehold.co/64x64/e2e8f0/94a3b8?text=N/A";
      let condText = period?.shortForecast || "N/A";

      if (obs) {
        if (obs.temperature?.value != null) {
          tempF = Math.round(obs.temperature.value * 9/5 + 32);
        }
        if (obs.windSpeed?.value != null) {
          windSpeed = Math.round(obs.windSpeed.value * 2.23694);
        }
        if (obs.windDirection?.value != null) {
          windDir = getWindDirectionAbbreviation(obs.windDirection.value);
        }
        if (obs.relativeHumidity?.value != null) {
          humidity = `${Math.round(obs.relativeHumidity.value)}%`;
        }
        if (obs.dewpoint?.value != null) {
          dewC = obs.dewpoint.value;
        }
        if (obs.icon) iconUrl = obs.icon;
        if (obs.textDescription) condText = obs.textDescription;
      } else if (period) {
        if (period.temperature != null) {
          tempF = period.temperatureUnit === "F"
            ? period.temperature
            : Math.round(period.temperature * 9/5 + 32);
        }
        if (period.windSpeed) windSpeed = period.windSpeed.split(" ")[0];
        if (period.windDirection) windDir = period.windDirection;
        if (period.relativeHumidity?.value != null) {
          humidity = `${Math.round(period.relativeHumidity.value)}%`;
        }
        if (period.dewpoint?.value != null) {
          dewC = period.dewpoint.value;
        }
      }

      summaryIconEl.src = iconUrl;
      summaryIconEl.alt = condText;
      summaryTextEl.textContent = condText;
      summaryTempEl.textContent = tempF != null ? `${tempF}Â°F` : "N/A";
      summaryWindEl.textContent = windSpeed !== "N/A" || windDir
        ? `${windSpeed} mph ${windDir}`.trim()
        : "N/A";

      const dewF = dewC != null ? Math.round(dewC * 9/5 + 32) : null;
      const dewText = dewF != null ? `${dewF}Â°F` : "N/A";
      const dewDesc = getDewPointDescription(dewF);
      summaryHumidityEl.textContent = `${humidity} / ${dewText} (${dewDesc})`;
    }

    // --- Display Active Alerts ---
    function displayActiveAlerts(features) {
      alertsContainer.innerHTML = "";
      if (!features || !features.length) {
        const p = document.createElement("p");
        p.className = "text-green-700";
        p.textContent = "No active alerts for this location.";
        alertsContainer.appendChild(p);
        return;
      }

      features.forEach((alert, idx) => {
        const props = alert.properties;
        const title = props.event || "ALERT";
        const timeText = formatAlertTime(props.sent, props.ends);
        const alertId = `alertCard${idx}`;

        const card = document.createElement("div");
        card.className = "alert-item bg-gray-200 border-gray-400 text-gray-800 flex";
        card.id = alertId;

        // Determine color scheme + icon
        const lower = title.toLowerCase();
        let iconEmoji = "â„¹ï¸";
        if (lower.includes("warning")) {
          iconEmoji = "âš ï¸";
          if (lower.includes("tornado")) {
            card.className = "alert-item bg-red-600 border-red-800 text-white flex";
            iconEmoji = "ðŸŒªï¸";
          } else if (lower.includes("severe thunderstorm")) {
            card.className = "alert-item bg-yellow-400 border-yellow-600 text-yellow-900 flex";
          } else {
            card.className = "alert-item bg-red-200 border-red-400 text-red-800 flex";
          }
        } else if (lower.includes("watch")) {
          iconEmoji = "â—";
          if (lower.includes("tornado")) {
            card.className = "alert-item bg-red-100 border-red-400 text-red-800 flex";
          } else if (lower.includes("severe thunderstorm")) {
            card.className = "alert-item bg-yellow-100 border-yellow-400 text-yellow-800 flex";
          }
        } else if (lower.includes("advisory")) {
          card.className = "alert-item bg-blue-100 border-blue-400 text-blue-800 flex";
        }

        // Summary container
        const summary = document.createElement("div");
        summary.className = "flex items-center justify-between flex-grow cursor-pointer bg-gray-100 p-4";
        summary.onclick = () => toggleAlert(alertId);

        const leftWrap = document.createElement("div");
        leftWrap.className = "flex items-center";

        const iconSpan = document.createElement("span");
        iconSpan.className = "alert-icon mr-2 text-xl";
        iconSpan.innerHTML = iconEmoji;

        const textSpan = document.createElement("span");
        textSpan.className = "alert-text";
        textSpan.innerHTML = `${title}<br><span class="text-sm font-normal">${timeText}</span>`;

        leftWrap.appendChild(iconSpan);
        leftWrap.appendChild(textSpan);

        const expandSpan = document.createElement("span");
        expandSpan.className = "expand-icon text-xl text-gray-600";
        expandSpan.textContent = "+";

        summary.appendChild(leftWrap);
        summary.appendChild(expandSpan);
        card.appendChild(summary);

        const details = document.createElement("div");
        details.className = "alert-details";
        details.innerHTML = `
          <p><strong>Issued By:</strong> ${props.senderName || "National Weather Service"}</p>
          <p><strong>Description:</strong> ${(props.description || "").replace(/\n/g, "<br>")}</p>
          <p><strong>Impacts:</strong> Potential for severe weather impacts. Stay informed.</p>
          <p>For more detailed information, please refer to the official NWS website.</p>
        `;
        card.appendChild(details);

        alertsContainer.appendChild(card);
      });
    }

    function toggleAlert(id) {
      const card = document.getElementById(id);
      card.classList.toggle("expanded");
      const exp = card.querySelector(".expand-icon");
      if (card.classList.contains("expanded")) {
        exp.style.transform = "rotate(45deg)";
        card.querySelector(".alert-details").style.maxHeight = "300px";
        card.querySelector(".alert-details").style.padding = "10px 15px";
      } else {
        exp.style.transform = "none";
        card.querySelector(".alert-details").style.maxHeight = "0";
        card.querySelector(".alert-details").style.padding = "0 15px";
      }
    }

    // --- Display Forecast ---
    function displayForecast(periods) {
      forecastContainer.innerHTML = "";
      if (!periods) return;

      const count = isShowing7Day ? 7 : 5;
      if (isShowing7Day) {
        forecastContainer.className = "grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-7 gap-3";
      } else {
        forecastContainer.className = "grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3";
      }

      let days = 0;
      for (let i = 0; i < periods.length && days < count; ) {
        const dayPeriod = periods[i];
        if (!dayPeriod.isDaytime) {
          i++;
          continue;
        }
        const dayName = new Date(dayPeriod.startTime).toLocaleDateString("en-US", { weekday: "short" });
        let nightPeriod = null;
        if (
          periods[i+1] &&
          !periods[i+1].isDaytime &&
          new Date(periods[i+1].startTime).toDateString() === new Date(dayPeriod.startTime).toDateString()
        ) {
          nightPeriod = periods[i+1];
        }

        let html = `
          <div class="bg-gray-50 p-3 rounded-lg shadow flex flex-col justify-between h-full text-center">
            <p class="font-semibold text-gray-700 text-sm">${dayName}</p>
            <div class="mt-1">
              <p class="text-xs text-gray-500 font-medium">DAY</p>
              <img src="${dayPeriod.icon}" alt="${dayPeriod.shortForecast}" class="mx-auto w-10 h-10 my-1" onerror="this.src='https://placehold.co/48x48/e2e8f0/94a3b8?text=N/A'">
              <p class="text-gray-800 text-sm">High: ${dayPeriod.temperature}Â°${dayPeriod.temperatureUnit}</p>
              <p class="text-xs text-gray-600 truncate" title="${dayPeriod.shortForecast}">${dayPeriod.shortForecast}</p>
            </div>
        `;
        if (nightPeriod) {
          html += `
            <div class="mt-2 pt-2 border-t border-gray-200">
              <p class="text-xs text-gray-500 font-medium">NIGHT</p>
              <img src="${nightPeriod.icon}" alt="${nightPeriod.shortForecast}" class="mx-auto w-10 h-10 my-1" onerror="this.src='https://placehold.co/48x48/e2e8f0/94a3b8?text=N/A'">
              <p class="text-gray-800 text-sm">Low: ${nightPeriod.temperature}Â°${nightPeriod.temperatureUnit}</p>
              <p class="text-xs text-gray-600 truncate" title="${nightPeriod.shortForecast}">${nightPeriod.shortForecast}</p>
            </div>
          `;
          i += 2;
        } else {
          html += `
            <div class="mt-2 pt-2 border-t border-gray-200">
              <p class="text-xs text-gray-500 font-medium">NIGHT</p>
              <p class="text-xs text-gray-500">N/A</p>
            </div>
          `;
          i++;
        }
        html += "</div>";
        forecastContainer.insertAdjacentHTML("beforeend", html);
        days++;
      }
    }

    // --- Embed Radar ---
    function embedRadar(lat, lon) {
      const iframe = document.createElement("iframe");
      iframe.width = "100%";
      iframe.height = "450";
      iframe.frameBorder = "0";
      iframe.src = `https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=default&metricTemp=default&metricWind=default&zoom=11&overlay=radar&product=radar&level=surface&lat=${lat}&lon=${lon}&marker=true`;
      radarContainer.innerHTML = "";
      radarContainer.appendChild(iframe);
    }

    // --- Geocoding via Nominatim ---
    async function geocodeLocation(query) {
      const url = `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(query)}&format=json&addressdetails=1&limit=1`;
      const resp = await fetch(url, { headers: { "User-Agent": NWS_USER_AGENT } });
      if (!resp.ok) throw new Error("Geocoding failed");
      const data = await resp.json();
      if (!data.length) throw new Error(`Location "${query}" not found.`);
      const res = data[0];
      return { lat: parseFloat(res.lat), lon: parseFloat(res.lon), displayName: res.display_name };
    }

    // --- NWS Fetch Helper ---
    async function nwsFetch(url) {
      const resp = await fetch(url, {
        headers: { "User-Agent": NWS_USER_AGENT, "Accept": "application/geo+json" }
      });
      if (!resp.ok) {
        const text = await resp.text();
        throw new Error(`NWS API Error ${resp.status}: ${text}`);
      }
      return resp.json();
    }

    // --- Format Alert Time ---
    function formatAlertTime(startISO, endISO) {
      if (!startISO || !endISO) return "";
      const start = new Date(startISO);
      const end = new Date(endISO);
      const optDate = { weekday: "short", month: "short", day: "numeric" };
      const optTime = { hour: "numeric", minute: "2-digit", hour12: true, timeZoneName: "short" };
      const s = start.toLocaleDateString("en-US", optDate) + " " + start.toLocaleTimeString("en-US", optTime);
      const e = end.toLocaleTimeString("en-US", optTime) + " " + end.toLocaleDateString("en-US", optDate);
      return `From ${s} until ${e}`;
    }

    function getWindDirectionAbbreviation(deg) {
      if (deg == null || isNaN(deg)) return "";
      const val = Math.floor(deg / 22.5 + 0.5);
      const arr = ["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];
      return arr[val % 16];
    }

    // --- Populate Mock News ---
    function displayMockNews() {
      newsContainer.innerHTML = "";
      const items = [
        { headline: "Major Storm System Developing in the Midwest", summary: "Forecasters are tracking a significant weather system...", source: "NWS Weather Brief", date: "June 3, 2025" },
        { headline: "Heat Advisory Issued for Southwestern States", summary: "Temperatures are expected to soar above 100Â°F...", source: "Local Weather Channel", date: "June 3, 2025" },
        { headline: "Tropical Update: Watching Area of Interest", summary: "Meteorologists are monitoring a tropical wave...", source: "National Hurricane Center", date: "June 3, 2025" }
      ];
      items.forEach(item => {
        const html = `
          <article class="mb-4 pb-4 border-b border-gray-200 last:border-b-0">
            <h3 class="font-semibold text-lg text-gray-800">
              <a href="#" target="_blank" rel="noopener noreferrer" class="hover:text-blue-600 hover:underline">${item.headline}</a>
            </h3>
            <p class="text-sm text-gray-600 mt-1">${item.summary}</p>
            <p class="text-xs text-gray-400 mt-1">${item.source} - ${item.date}</p>
          </article>`;
        newsContainer.insertAdjacentHTML("beforeend", html);
      });
    }

    // --- Initial Setup ---
    document.getElementById("current-year").textContent = new Date().getFullYear();
    document.querySelectorAll(".hidden-by-default").forEach(el => {
      el.classList.add("hidden");
      el.classList.remove("hidden-by-default");
    });
    locationSpecificSections.forEach(hideElement);
    displayMockNews();
  </script>
</body>
</html>
